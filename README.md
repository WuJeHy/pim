# pim

一个im系统



## 系统结构

一个 grpc 后端作为主服务

一个 grpc 客户端作为客户机

为了兼容web端 , 中间使用桥接 转换模块转接grpc 的数据为pio im 的二进制方式转发



因为 web端不支持grpc  https://learn.microsoft.com/zh-cn/aspnet/core/grpc/browser?view=aspnetcore-7.0



grpc 使用  http2.0 所以是一条长链接 比ws 处理更简单

为了兼容 web 需要 后期使用 gin 转发ws 到grpc



### 实现方式

使用 grpc 的单向推流实现数据通知推送

使用 普通grpc 实现接口调用

每次调用普通接口都要携带 一个唯一标识跟踪接口所属身份信息



*为什么不选择双向流实现身份标识 ? 

虽然双向流可以减少业务的收发包,类似 ws 一样甚至更节省流量, 但是开发难度就增加了, 该版本不使用那个方案.



而使用ws 转发到web端的则对后端 使用grpc , 对前端则需要双向流, 不能只将grpc 单向流转发 ws 单向流 , 普通接口使用 http1.0 普通post 发送, 因为 http1.0 的header 臃肿 , grpc 基于 http2.0 只有很小的头



### 项目模块:

#### 用户模块

* 注册账户
* 登录系统
  * 使用验证码登录
  * 使用密码登录
* 获取用户基本信息
* 修改头像
* 修改用户名
* 修改昵称



#### 聊天模块:

* 接收消息
* 发送普通文本消息
* 发送图片消息
* 发送文件消息
* 发送音频消息



#### 群组模块

群组规则 同 旧项目相同

* 创建群
* 修改基本群信息
* 群成员管理
  * 增加群成员
  * 设置群成员为管理员
  * 删除群成员

#### 其他业务:(todo)





UI:

前端使用终端ui 为第一版本的使用 

目标群体: 程序员 , 猎奇爱好者



后期: 

web 端



使用框架:

主要: grpc + mysql + redis  + gin + ... 



项目周期: 

开发周期一期 : 5 天 

开发周期二期: 5天 











